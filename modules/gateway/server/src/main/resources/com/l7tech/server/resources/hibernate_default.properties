#
# Base hibernate.properties file with common properties
#

#
# Standard Settings
#
hibernate.transaction.factory_class = org.hibernate.transaction.JDBCTransactionFactory
hibernate.connection.isolation = 4
hibernate.connection.autocommit = false
hibernate.validator.apply_to_ddl = false
javax.persistence.validation.group.pre-persist =
javax.persistence.validation.group.pre-update =
javax.persistence.validation.group.pre-remove =

#
# Database specific properties, these are broken out to allow override of specific settings if required.
#
l7.mysql.url.replicated.hosts = ${node.db.config.main.host}:${node.db.config.main.port},${node.db.config.failover.host}:${node.db.config.failover.port}
l7.mysql.url.standalone.hosts = ${node.db.config.main.host}:${node.db.config.main.port}
l7.mysql.url.parameter.autoReconnect = false
l7.mysql.url.parameter.characterEncoding = UTF8
l7.mysql.url.parameter.characterSetResults = UTF8
l7.mysql.url.parameter.failOverReadOnly = false
l7.mysql.url.parameter.secondsBeforeRetryMaster = 20
l7.mysql.url.parameter.queriesBeforeRetryMaster = 2000
l7.mysql.url.parameter.socketTimeout = 120000
l7.mysql.url.parameter.connectTimeout = 2000
l7.mysql.url.parameter.logger = com.mysql.jdbc.log.Jdk14Logger
l7.mysql.url.parameters.extra =
l7.mysql.url.parameters = \
  autoReconnect=${l7.mysql.url.parameter.autoReconnect}\
  &characterEncoding=${l7.mysql.url.parameter.characterEncoding}\
  &characterSetResults=${l7.mysql.url.parameter.characterSetResults}\
  &failOverReadOnly=${l7.mysql.url.parameter.failOverReadOnly}\
  &secondsBeforeRetryMaster=${l7.mysql.url.parameter.secondsBeforeRetryMaster}\
  &queriesBeforeRetryMaster=${l7.mysql.url.parameter.queriesBeforeRetryMaster}\
  &socketTimeout=${l7.mysql.url.parameter.socketTimeout}\
  &connectTimeout=${l7.mysql.url.parameter.connectTimeout}\
  &logger=${l7.mysql.url.parameter.logger}\
  ${l7.mysql.url.parameters.extra}
l7.mysql.connection.url = jdbc:mysql://${l7.mysql.url.${node.db.clusterType}.hosts}/${node.db.config.main.name}?${l7.mysql.url.parameters}
l7.mysql.connection.driver_class = com.mysql.jdbc.Driver
l7.mysql.dialect = org.hibernate.dialect.MySQLDialect

#
# Commonly customized settings
#
hibernate.dialect = ${l7.${node.db.type}.dialect}
hibernate.connection.driver_class = ${l7.${node.db.type}.connection.driver_class}
hibernate.connection.url = ${l7.${node.db.type}.connection.url}
hibernate.connection.username = ${node.db.config.main.user}
hibernate.connection.password = ${node.db.config.main.pass}

