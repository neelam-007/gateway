<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://www.w3.org/2005/10/profile">
    <title>Log In [Enterprise Service Manager]</title>
    <link rel="icon" type="image/png" href="/images/favicon.ico" />

    <link rel="stylesheet" href="/css/l7.css" media="all" type="text/css" />
    <link rel="stylesheet" href="/yui/button/assets/skins/sam/button.css" media="all" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/yui/assets/skins/sam/skin.css">
    <link rel="stylesheet" href="/css/l7-yui-skin.css" media="all" type="text/css" />

    <script type="text/javascript" src="/yui/utilities/utilities.js"></script>
    <script type="text/javascript" src="/yui/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script type="text/javascript" src="/yui/element/element-beta-min.js"></script>
    <script type="text/javascript" src="/yui/button/button-min.js"></script>
    <script type="text/javascript">
        function updateSubmitButton() {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            YAHOO.widget.Button.getButton('submit').set('disabled', username == '' || password == '');
        }

        function onLogin(event) {
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var callback = {
                success : function(o) {
                    var result = o.responseText;
                    if ( result == '' ) {
                        document.location = '/';
                    } else {
                        document.getElementById('feedback').innerHTML = result;
                    }
                },
                failure : function(o) {
                    document.getElementById('feedback').innerHTML = "Enterprise Service Manager server is not available.";
                }
            };
            var postData = 'username=' + encodeURIComponent(username) + '&password=' + encodeURIComponent(password);
            YAHOO.util.Connect.asyncRequest('POST', '/login', callback, postData);
        }

        function init() {
            loginButton = new YAHOO.widget.Button('submit', {
                onclick : {fn : onLogin}
            });
            updateSubmitButton();
            document.getElementById('username').focus();
        }
    </script>
</head>
<body class="yui-skin-sam" onload="init();">
<table width="100%">
    <tr>
        <td>
            <div class="header">
                <table width="100%">
                    <tr class="header">
                        <td class="logoLeft"><img src="../images/logoLeft.png" alt="" /></td>
                        <td class="logo"><img src="../images/l7Logo.png" alt="Layer 7 Technologies Inc." /><img src="../images/esmLogo.png" alt="" /></td>
                        <td class="logoRight"><img src="../images/logoRight.png" alt="" /></td>
                        <td width="100%"><img src="../images/spacer.png" alt="" /></td>
                    </tr>
                </table>
            </div>
            <div class="divider"><img src="../images/spacer.png" alt="" /></div>
            <div class="content">
                <div class="center">     <center>
                    <table height="420" width="340">
                        <tr>
                            <td>
                                <div class="panel">
                                    <div class="panelTitle">Log In</div>
                                    <div class="panelContent">
                                        <div class="center" style="margin-left: 24px;">
                                            <div id="feedback"/>
                                        </div>
                                        <form method="post" action="/login">
                                            <table class="center spaced">
                                                <tr>
                                                    <td class="right">User Name:</td>
                                                    <td><input id="username" name="username" type="text" onkeyup="updateSubmitButton();" /></td>
                                                </tr>
                                                <tr>
                                                    <td class="right">Password:</td>
                                                    <td><input id="password" name="password" type="password" onkeyup="updateSubmitButton();" /></td>
                                                </tr>
                                                <tr>
                                                    <td class="right"> </td>
                                                    <td class="right"><input id="submit" type="button" value="Log In" /></td>
                                                </tr>
                                            </table>
                                        </form>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>  </center>
                </div>
            </div>
            <div class="statusBar">
                <table>
                    <tr>
                        <td width="100%"><img src="../images/spacer.png" alt="" /></td>
                        <td><a class="nowrap" href="http://www.layer7tech.com" target="_blank">Layer 7 Technologies Inc.</a></td>
                    </tr>
                </table>
            </div>
            <div class="divider"><img src="../images/spacer.png" alt="" /></div>
        </td>
    </tr>
</table>
</body>
</html>
