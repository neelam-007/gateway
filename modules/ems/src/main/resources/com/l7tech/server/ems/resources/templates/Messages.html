<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- PROTOTYPE ONLY BEGIN -->
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <!-- PROTOTYPE ONLY END -->
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Tools [Enterprise Service Manager]</title>
    <link rel="stylesheet" type="text/css" href="../css/l7.css" />

    <!-- Required YUI modules: connection, datatable, datasource, paginator, resize -->
    <link rel="stylesheet" type="text/css" href="../yui/assets/skins/sam/skin.css">
    <script type="text/javascript" src="../yui/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script type="text/javascript" src="../yui/connection/connection-min.js"></script>
    <script type="text/javascript" src="../yui/datasource/datasource-min.js"></script>
    <script type="text/javascript" src="../yui/element/element-beta-min.js"></script>
    <script type="text/javascript" src="../yui/paginator/paginator-min.js"></script>
    <script type="text/javascript" src="../yui/dragdrop/dragdrop-min.js"></script>
    <script type="text/javascript" src="../yui/datatable/datatable-debug.js"></script>
    <script type="text/javascript" src="../yui/resize/resize-min.js"></script>

    <link rel="stylesheet" type="text/css" href="../css/l7-yui-skin.css"> <!-- modifies YUI sam skin; must come after YUI CSS files -->
    <script type="text/javascript" src="../js/l7.js"></script>
    <script type="text/javascript">
        function init() {
            var columnDefs = [
                {key:'formattedTime', label:'Time', resizeable:true, className:['nowrap', 'tdRight']},
                {key:'source', label:'Source/Sender', resizeable:true, className:['nowrap']},
                {key:'text', label:'Message', resizeable:true}
            ];

            function buildQueryString(state, dataTable) {
                return state.pagination.recordOffset + '/' + state.pagination.rowsPerPage + '.json';
            };

            //
            // System Messages
            //

            var sysMsgPaginator = new YAHOO.widget.Paginator({
                    containers         : ['sysMsgPagination'],
                    pageLinks          : 5,
                    rowsPerPage        : 10,
                    rowsPerPageOptions : [10, 20],
                    template           : 'Oldest {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink} Newest<img src="../images/spacer.png" height="1" width="30" alt="" />Show {RowsPerPageDropdown} per page'
                });
            sysMsgPaginator.setAttributeConfig('firstPageLinkLabel', {value:'<img src="../images/gotoFirst.png" alt="" />', validator:YAHOO.lang.isString});
            sysMsgPaginator.setAttributeConfig('previousPageLinkLabel', {value:'<img src="../images/gotoPrevious.png" alt="" />', validator:YAHOO.lang.isString});
            sysMsgPaginator.setAttributeConfig('nextPageLinkLabel', {value:'<img src="../images/gotoNext.png" alt="" />', validator:YAHOO.lang.isString});
            sysMsgPaginator.setAttributeConfig('lastPageLinkLabel', {value:'<img src="../images/gotoLast.png" alt="" />', validator:YAHOO.lang.isString});

            var sysMsgDataSource = new YAHOO.util.DataSource('systemMessages/', {
                    connXhrMode     : 'cancelStaleRequests',
                    responseType    : YAHOO.util.DataSource.TYPE_JSON,
                    responseSchema  : {
                        resultsList : 'records',
                        fields      : [
                            {key:'index'},
                            {key:'guid'},
                            {key:'millis'},
                            {key:'formattedTime'},
                            {key:'source'},
                            {key:'text'}
                        ],
                        metaFields  : {totalRecords:'totalRecords'}
                    }
                });

            var sysMsgDataTable = new YAHOO.widget.DataTable('sysMsgDataTable', columnDefs, sysMsgDataSource, {
                    draggableColumns       : true,
                    dynamicData            : true,
                    height                 : '210px',
                    initialRequest         : '0/10.json',
                    generateRequest        : buildQueryString,
                    paginator              : sysMsgPaginator,
                    scrollable             : true
                });
            sysMsgDataTable.handleDataReturnPayload = function(oRequest, oResponse, oPayload) {
                oPayload.totalRecords = oResponse.meta.totalRecords;
                return oPayload;
            }

            var SYS_MSG_DELTA_H;    // Pre-computed difference in height between resizable panel and data table.
            sysMsgDataTable.on('initEvent', function(event) {
                SYS_MSG_DELTA_H = document.getElementById('sysMsgResize').offsetHeight - parseInt(sysMsgDataTable.get('height'), 10);
            });
            var sysMsgResize = new YAHOO.util.Resize('sysMsgResize', {handles:['b'], minHeight:120});
            sysMsgResize.on('resize', function(event) {
                sysMsgDataTable.set('height', document.getElementById('sysMsgResize').offsetHeight - SYS_MSG_DELTA_H + 'px');
                document.getElementById('sysMsgResize').style.width = '';   // workaround for unwanted widening
            });
            sysMsgResize.on('endResize', function(event) {
                document.getElementById('sysMsgResize').style.width = '';   // workaround for unwanted widening
            });

            //
            // User Messages
            //

            var usrMsgPaginator = new YAHOO.widget.Paginator({
                    containers         : ['usrMsgPagination'],
                    pageLinks          : 5,
                    rowsPerPage        : 10,
                    rowsPerPageOptions : [10, 20],
                    template           : 'Oldest {FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink} Newest<img src="../images/spacer.png" height="1" width="30" alt="" />Show {RowsPerPageDropdown} per page'
                });
            usrMsgPaginator.setAttributeConfig('firstPageLinkLabel', {value:'<img src="../images/gotoFirst.png" alt="" />', validator:YAHOO.lang.isString});
            usrMsgPaginator.setAttributeConfig('previousPageLinkLabel', {value:'<img src="../images/gotoPrevious.png" alt="" />', validator:YAHOO.lang.isString});
            usrMsgPaginator.setAttributeConfig('nextPageLinkLabel', {value:'<img src="../images/gotoNext.png" alt="" />', validator:YAHOO.lang.isString});
            usrMsgPaginator.setAttributeConfig('lastPageLinkLabel', {value:'<img src="../images/gotoLast.png" alt="" />', validator:YAHOO.lang.isString});

            var usrMsgDataSource = new YAHOO.util.DataSource('userMessages/', {
                    connXhrMode     : 'cancelStaleRequests',
                    responseType    : YAHOO.util.DataSource.TYPE_JSON,
                    responseSchema  : {
                        resultsList : 'records',
                        fields      : [
                            {key:'index'},
                            {key:'guid'},
                            {key:'millis'},
                            {key:'formattedTime'},
                            {key:'source'},
                            {key:'text'}
                        ],
                        metaFields  : {totalRecords:'totalRecords'}
                    }
                });

            var usrMsgDataTable = new YAHOO.widget.DataTable('usrMsgDataTable', columnDefs, usrMsgDataSource, {
                    draggableColumns       : true,
                    dynamicData            : true,
                    height                 : '210px',
                    initialRequest         : '0/10.json',
                    generateRequest        : buildQueryString,
                    paginator              : usrMsgPaginator,
                    scrollable             : true
                });
            usrMsgDataTable.handleDataReturnPayload = function(oRequest, oResponse, oPayload) {
                oPayload.totalRecords = oResponse.meta.totalRecords;
                return oPayload;
            }

            var USR_MSG_DELTA_H;    // Pre-computed difference in height between resizable panel and data table.
            usrMsgDataTable.on('initEvent', function(event) {
                USR_MSG_DELTA_H = document.getElementById('usrMsgResize').offsetHeight - parseInt(usrMsgDataTable.get('height'), 10);
            });
            var usrMsgResize = new YAHOO.util.Resize('usrMsgResize', {handles:['b'], minHeight:120});
            usrMsgResize.on('resize', function(event) {
                usrMsgDataTable.set('height', document.getElementById('usrMsgResize').offsetHeight - USR_MSG_DELTA_H + 'px');
                document.getElementById('usrMsgResize').style.width = '';   // workaround for unwanted widening
            });
            usrMsgResize.on('endResize', function(event) {
                document.getElementById('usrMsgResize').style.width = '';   // workaround for unwanted widening
            });
        }
    </script>
</head>
<body class="yui-skin-sam" onload="init();">
<noscript><div class="javascriptWarning">This page requires JavaScript. Your browser either does not have JavaScript support or has disabled it.</div></noscript>
<table width="100%">
    <tr>
        <td>
            <div class="header">
                <table width="100%">
                    <tr class="header">
                        <td class="logoLeft"><img src="../images/logoLeft.png" alt="" /></td>
                        <td class="logo"><a href="Monitor.html"><img src="../images/l7Logo.png" alt="Layer 7 Technologies Inc." /><img src="../images/esmLogo.png" alt="" /></a></td>
                        <td class="logoRight"><img src="../images/logoRight.png" alt="" /></td>
                        <td width="100%"><img src="../images/spacer.png" alt="" /></td>
                        <td class="middle nowrap">Logged in as "admin"<br />since May 5, 2008 05:57:54 PM</td>
                        <td class="middle"><form method="get" action="Login.html"><input type="submit" value="Log Out" /></form></td>
                        <td class="middle help"><a href="Help.html" target="l7-esm-help" title="Open help page in a separate window">Help</a></td>
                    </tr>
                </table>
            </div>
            <div class="divider"><img src="../images/spacer.png" alt="" /></div>
            <div>
                <table>
                    <tr>
                        <td id="tabLTManageGateways"><img src="../images/tabLT.png" alt="" /></td>
                        <td id="tabCTManageGateways" class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRTManageGateways"><img src="../images/tabRT.png" alt="" /></td>
                        <td id="tabLTManagePolicies"><img src="../images/tabLT.png" alt="" /></td>
                        <td id="tabCTManagePolicies" class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRTManagePolicies"><img src="../images/tabRT.png" alt="" /></td>
                        <td id="tabLTReports"><img src="../images/tabLT.png" alt="" /></td>
                        <td id="tabCTReports" class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRTReports"><img src="../images/tabRT.png" alt="" /></td>
                        <td id="tabLTTools"><img src="../images/tabLT.png" alt="" /></td>
                        <td id="tabCTTools" class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRTTools"><img src="../images/tabRT.png" alt="" /></td>
                        <td id="tabLTSettings"><img src="../images/tabLT.png" alt="" /></td>
                        <td id="tabCTSettings" class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRTSettings"><img src="../images/tabRT.png" alt="" /></td>
                        <td><img src="../images/tabLT.png" alt="" /></td>
                        <td class="tabCT"><img src="../images/spacer.png" alt="" /></td>
                        <td><img src="../images/tabRT.png" alt="" /></td>
                    </tr>
                    <tr>
                        <td id="tabLMManageGateways" class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabCMManageGateways" class="tabCM"><a href="Monitor.html">Manage Gateways</a></td>
                        <td id="tabRMManageGateways" class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabLMManagePolicies" class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabCMManagePolicies" class="tabCM"><a href="PolicyMigration.html">Manage Policies</a></td>
                        <td id="tabRMManagePolicies" class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabLMReports" class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabCMReports" class="tabCM"><a href="StandardReports.html">Reports</a></td>
                        <td id="tabRMReports" class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabLMTools" class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabCMTools" class="tabCMon">Tools</td>
                        <td id="tabRMTools" class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabLMSettings" class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabCMSettings" class="tabCM"><a href="UserSettings.html">Settings</a></td>
                        <td id="tabRMSettings" class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                        <td class="tabLM"><img src="../images/spacer.png" alt="" /></td>
                        <td class="tabCM" width="100%"><img src="../images/spacer.png" alt="" /></td>
                        <td class="tabRM"><img src="../images/spacer.png" alt="" /></td>
                    </tr>
                    <tr>
                        <td id="tabLBManageGateways"><img src="../images/tabLBoff.png" alt="" /></td>
                        <td id="tabCBManageGateways" class="tabCBoff"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRBManageGateways"><img src="../images/tabRBoff.png" alt="" /></td>
                        <td id="tabLBManagePolicies"><img src="../images/tabLBoff.png" alt="" /></td>
                        <td id="tabCBManagePolicies" class="tabCBoff"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRBManagePolicies"><img src="../images/tabRBoff.png" alt="" /></td>
                        <td id="tabLBReports"><img src="../images/tabLBoff.png" alt="" /></td>
                        <td id="tabCBReports" class="tabCBoff"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRBReports"><img src="../images/tabRBoff.png" alt="" /></td>
                        <td id="tabLBTools"><img src="../images/tabLBon.png" alt="" /></td>
                        <td id="tabCBTools" class="tabCBon"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRBTools"><img src="../images/tabRBon.png" alt="" /></td>
                        <td id="tabLBSettings"><img src="../images/tabLBoff.png" alt="" /></td>
                        <td id="tabCBSettings" class="tabCBoff"><img src="../images/spacer.png" alt="" /></td>
                        <td id="tabRBSettings"><img src="../images/tabRBoff.png" alt="" /></td>
                        <td><img src="../images/tabLBoff.png" alt="" /></td>
                        <td class="tabCBoff"><img src="../images/spacer.png" alt="" /></td>
                        <td><img src="../images/tabRBoff.png" alt="" /></td>
                    </tr>
                </table>
            </div>
            <script language="JavaScript" type="text/javascript">
                l7.TabBar.initTab('ManageGateways');
                l7.TabBar.initTab('ManagePolicies');
                l7.TabBar.initTab('Reports');
                l7.TabBar.initTab('Settings');
            </script>
            <div class="subtabBar">
                <span class="subtabOn">Messages</span>
                |
                <span class="subtabOff"><a href="Audits.html">Audits</a></span>
                |
                <span class="subtabOff"><a href="Logs.html">Logs</a></span>
            </div>
            <div class="content">
                <wicket:extend>
                    <h4 style="height: 400px">This feature is not available in this version.</h4>
                </wicket:extend>
                    
                    <div class="panel">
                        <div class="panelTitle tippy"><img id="sysMsgTippy" class="tippy" src="../images/tippyExpanded.png" alt="" onclick="l7.Tippy.toggleTippy(this, 'sysMsgContent')" /><span class="clickable" title="System-wide messages" onclick="l7.Tippy.toggleTippy('sysMsgTippy', 'sysMsgContent')">System Messages</span></div>
                        <div id="sysMsgContent">
                            <div id="sysMsgPagination" class="panelToolbar"></div>
                            <div id="sysMsgResize" class="panelContent">
                                <div id="sysMsgDataTable"></div>
                            </div>
                        </div>
                    </div>
                    <div class="panel">
                        <div class="panelTitle tippy"><img id="usrMsgTippy" class="tippy" src="../images/tippyExpanded.png" alt="" onclick="l7.Tippy.toggleTippy(this, 'usrMsgContent')" /><span class="clickable" title="User-specific messages" onclick="l7.Tippy.toggleTippy('usrMsgTippy', 'usrMsgContent')">User Messages</span></div>
                        <div id="usrMsgContent">
                            <div id="usrMsgPagination" class="panelToolbar"></div>
                            <div id="usrMsgResize" class="panelContent">
                                <div id="usrMsgDataTable"></div>
                            </div>
                        </div>
                    </div>
            </div>
            <div class="statusBar">
                <table>
                    <tr>
                        <td width="100%">Time Zone: Canada/Pacific (GMT-08:00/<b>-07:00</b>)</td>
                        <td><a class="nowrap" href="http://www.layer7tech.com" target="_blank">Layer 7 Technologies Inc.</a></td>
                    </tr>
                </table>
            </div>
            <div class="divider"><img src="../images/spacer.png" alt="" /></div>
        </td>
    </tr>
</table>
</body>
</html>
