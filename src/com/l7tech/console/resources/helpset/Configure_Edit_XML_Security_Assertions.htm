<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>





<head>

<title>Configure/Edit XML Security Assertions</title>



 <meta http-equiv=content-type content="text/html; charset=windows-1252">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=8600>
<meta name=layout-width content=773>
<meta name=x-ignored-words content="XPath;SAML;NotOnOrAfter;saml;requestor;WS;soapenv">




 <link rel="StyleSheet" href="JavaHelp.css">



 <META NAME="generator" CONTENT="RoboHelp by eHelp Corporation www.ehelp.com">
</head>




<body>

<h1>Configure and Edit XML Security Assertions</h1>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 Multiple XML Security assertions can be used in a single security policy. 
 The XML Security assertions can only be used in a Web service security 
 policy.</p>
</div>

<p style="margin-bottom: 9pt;">In the SecureSpan™ Manager, the following 
 assertions are available in the XML Security category of the [Assertions] 
 tab:</p>

<h6>&nbsp;</h6>

<p><img src="XMLSAssens.gif" x-maintain-ratio="TRUE" style="border: none;
				margin-left: 0px;
				margin-right: 0px;
				margin-top: 4px;
				margin-bottom: 10px;
				width: 254px;
				height: 288px;
				float: none;
				border-style: none;
				border-style: none;" width="254" height="288" border="0"></p>

<h6 style="color: #7c7c7c;
			margin-top: 2pt;
			margin-bottom: 10pt;">The XML Security Category of the [Assertions] 
 Tab</h6>

<h6>&nbsp;</h6>

<h4>Quick Links:</h4>

<p class="quicklinks"><a href="#Sign_Request_Element">Sign Request Element</a></p>

<p class="quicklinks"><a href="#Encrypt_Request_Element">Encrypt Request 
 Element</a></p>

<p class="quicklinks"><a href="#Sign_Response_Element">Sign Response Element</a></p>

<p class="quicklinks"><a href="#Encrypy_Response_Element">Encrypt Response 
 Element</a></p>

<p class="quicklinks"><a href="#WSS_Replay_Protection">WSS Replay Protection</a></p>

<h2 style="color: #000000;"><a name=Sign_Request_Element
								style="color: #000000;">Sign Request Element</a></h2>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The Sign Request Element assertion supports the W3C XML Signature 1.0 
 standard. The assertion can only be used in a Web service security policy. 
 The Sign Request Element assertion must be placed anywhere before the 
 routing assertion in a security policy. For information about routing 
 assertions, see <a href="Configure_Edit_Message_Routing_Assertions.htm">Configure 
 and Edit Message Routing Assertions</a>. You can add a Sign Request Element 
 assertion for each element of the request message that you want signed.</p>
</div>

<p>The Sign Request Element assertion allows you to require that the Web 
 service requestor sign a specific element whenever it appears in the request 
 message. The assertion checks if a selected XPath expression matches the 
 corresponding element in the request message. If a matching element is 
 not found, then nothing in the request message must be signed. If a matching 
 element is found, then that element must be signed. A matching element 
 is considered to be signed if the signature covers at least the entire 
 element including opening and closing tags, attributes, and all child 
 content.</p>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 In a security policy, the Sign Request Element assertion must be placed 
 anywhere before the routing assertion. For information about routing assertions, 
 see <a href="Configure_Edit_Message_Routing_Assertions.htm">Configure 
 and Edit Message Routing Assertions</a>. For information on the policy 
 and assertion rules used in the SecureSpan™ Manager, see <a href="Security_Policy_Organization_and_Rules.htm">Security 
 Policy Organization and Rules</a>.</p>
</div>

<h3 style="color: #000000;"><a name=Add_and_Configure_the_Sign_Request_Element_Assertion
								style="color: #000000;">Add and Configure 
 the Sign Request Element Assertion</a></h3>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Add the assertion to the Policy Development window 
 by one of two methods:</p></li>
</ol>

<ol style="list-style: disc;"
	type=disc>
	
	<ul style="list-style: disc;"
		type=disc>
		
		<li class="kadov-p"><p>Drag and drop the assertion from the [<span 
 style="font-weight: bold;"><B>Assertions</B></span>] tab into the Policy Development 
 window, or &nbsp;</p></li>
		
		<li class="kadov-p"><p>Highlight the assertion in the [<span style="font-weight: bold;"><B>Assertions</B></span>] 
 tab and click the <img src="MoveAssertionOver.gif" x-maintain-ratio="TRUE" style="border: none;
								width: 22px;
								height: 18px;
								margin-left: 0px;
								margin-right: 0px;
								margin-top: 0px;
								margin-bottom: -2.5px;
								float: none;
								border-style: none;
								border-style: none;" width="22" height="18" border="0"> &nbsp;(Add 
 Assertion) button in the Assertion Tool Bar. </p></li>
	</ul>
</ol>

<ol start=2
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The &quot;Sign request element&quot; assertion 
 is added to the Policy Development window. Right-click the assertion. 
 A drop-down menu appears. Select <span style="font-weight: bold;"><B>Sign 
 Request Element Properties</B></span>.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Sign Request Element Properties form. &nbsp;&nbsp;</p>
</div>

<ol start=3
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The Sign Request Element Properties form appears. 
 <span style="margin-left: 0px;">Select the operation that contains the 
 element that you want signed from the Web Service Operations window.</span></p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The operations are loaded from the Web service WSDL code. For information 
 about the WSDL that defines a Web service, see <a HREF="Manage_SOAP_Web_Services.htm">Manage 
 SOAP Web Services</a>.</p>
</div>

<ol start=4
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p" class="kadov-p">The XML code for the operation appears as expanded 
 nodes in the Code window. Click the target element.</li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 Clicking, or highlighting, an element selects it (and any child code) 
 for the assertion signature requirement. To collapse the expanded nodes, 
 click &nbsp;<img src="CollapseNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. To re-expand the nodes, click &nbsp;<img src="ExpandNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. </p>
</div>

<p style="margin-left: 40px;"><img src="SignReqElem.gif" x-maintain-ratio="TRUE" style="border: none;
											margin-left: 0px;
											margin-right: 0px;
											margin-top: 4px;
											margin-bottom: 10px;
											width: 609px;
											height: 383px;
											float: none;
											border-style: none;
											border-style: none;" width="609" height="383" border="0"></p>

<ol start=5>
	
	<li class="kadov-p"><p style="margin-left: 0px;">Click [<span style="font-weight: bold;"><B>OK</B></span>]. 
 The modified assertion is added to the Policy Development window. Repeat 
 to configure the signature of additional elements. </p></li>
</ol>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 A WSS Signature, WS Secure Conversation, or SAML Security authentication 
 assertion must be added for each Sign Request Element assertion in a security 
 policy. See <a href="Configure_Edit_Authentication_Assertions.htm">Configure 
 and Edit Authentication Assertions</a> for more information.</p>
</div>

<h3>Edit the Sign Request Element Assertion</h3>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>In the Policy Development window, right-click 
 the &quot;Sign request element&quot; assertion. A drop-down menu appears. 
 Select <span style="font-weight: bold;"><B>Sign Request Element Properties</B></span></p></li>
</ul>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Sign Request Element Properties form. &nbsp;&nbsp;</p>
</div>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p style="font-weight: normal;">The Sign Request 
 Element Properties form appears. Change the element to sign as required. 
 See Steps #3-5 in <a href="#Add_and_Configure_the_Sign_Request_Element_Assertion">Add 
 and Configure the Sign Request Element Assertion</a> for instructions.</p></li>
</ul>

<h2 style="color: #000000;"><a name=Encrypt_Request_Element
								style="color: #000000;">Encrypt Request 
 Element</a></h2>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The Encrypt Request Element assertion supports the W3C XML Encryption 
 1.0 standard. The assertion can only be used in a Web service security 
 policy. The Encrypt Request Element assertion must be placed anywhere 
 before the routing assertion in a security policy. For information about 
 routing assertions, see <a href="Configure_Edit_Message_Routing_Assertions.htm">Configure 
 and Edit Message Routing Assertions</a>. You can add an Encrypt Request 
 Element assertion for each element of the request message that you want 
 encrypted.</p>
</div>

<p>The Encrypt Request Element assertion allows you to require that the 
 Web service requestor encrypt a specific element whenever it appears in 
 the request message. The assertion checks if a selected XPath expression 
 matches the corresponding element in the request message. If non-empty 
 matches exist but were not encrypted by the sender, then the assertion 
 fails; otherwise, it succeeds. A matching element is considered to be 
 encrypted if it is completely encrypted or if all of its child content 
 (except leading and trailing white space) is encrypted. Elements that 
 are empty or contain only white space can be left un-encrypted in the 
 request message.</p>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 A matching element's own opening and closing tags and tag attributes do 
 not have to be encrypted. To force the encryption of an entire element 
 — including opening and closing tags, attributes, and white space content 
 — match the XPath expression to the parent element of the message. </p>
</div>

<h3 style="color: #000000;"><a name=Add_and_Configure_the_Encrypt_Request_Element_Assertion
								style="color: #000000;">Add and Configure 
 the Encrypt Request Element Assertion</a></h3>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 In a security policy, the Encrypt Request Element assertion must be placed 
 anywhere before the routing assertion. For information about routing assertions, 
 see <a href="Configure_Edit_Message_Routing_Assertions.htm">Configure 
 and Edit Message Routing Assertions</a>. For information on the policy 
 and assertion rules used in the SecureSpan™ Manager, see <a href="Security_Policy_Organization_and_Rules.htm">Security 
 Policy Organization and Rules</a>.</p>
</div>

<h6>&nbsp;</h6>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Add the assertion to the Policy Development window 
 by one of two methods:</p></li>
</ol>

<ol style="list-style: disc;"
	type=disc>
	
	<ul style="list-style: disc;"
		type=disc>
		
		<li class="kadov-p"><p>Drag and drop the assertion from the [<span 
 style="font-weight: bold;"><B>Assertions</B></span>] tab into the Policy Development 
 window, or &nbsp;</p></li>
		
		<li class="kadov-p"><p>Highlight the assertion in the [<span style="font-weight: bold;"><B>Assertions</B></span>] 
 tab and click the <img src="MoveAssertionOver.gif" x-maintain-ratio="TRUE" style="border: none;
								width: 22px;
								height: 18px;
								margin-left: 0px;
								margin-right: 0px;
								margin-top: 0px;
								margin-bottom: -2.5px;
								float: none;
								border-style: none;
								border-style: none;" width="22" height="18" border="0"> &nbsp;(Add 
 Assertion) button in the Assertion Tool Bar. </p></li>
	</ul>
</ol>

<ol start=2
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The &quot;Encrypt request element&quot; assertion 
 is added to the Policy Development window. Right-click the assertion. 
 A drop-down menu appears. Select <span style="font-weight: bold;"><B>Encrypt 
 Request Element Properties</B></span>.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Encrypt Request Element Properties form. &nbsp;&nbsp;</p>
</div>

<ol start=3
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The Encrypt Request Element Properties form appears. 
 <span style="margin-left: 0px;">Select the operation that contains the 
 element that you want encrypted from the Web Service Operations window.</span></p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The operations are loaded from the Web service WSDL code. For information 
 about the WSDL that defines a Web service, see <a href="Manage_SOAP_Web_Services.htm">Manage 
 SOAP Web Services</a>. The SecureSpan™ Manager will not allow you to encrypt 
 the &quot;/soapenv:Envelope&quot; element in the Encrypt Request Element 
 Properties form. You can, however, encrypt a child element within the 
 envelope such as &quot;/soapenv:Envelope/soapenv:Body.&quot;</p>
</div>

<ol start=4
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p style="margin-left: 0px;">The XML code for the 
 operation appears as expanded nodes in the Code window. Click the target 
 element.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 Clicking, or highlighting, an element selects it (and any child code) 
 for the assertion encryption requirement. To collapse the expanded nodes, 
 click &nbsp;<img src="CollapseNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. To re-expand the nodes, click &nbsp;<img src="ExpandNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. </p>
</div>

<ol start=5>
	
	<li class="kadov-p"><p style="margin-left: 0px;">Click [<span style="font-weight: bold;"><B>OK</B></span>]. 
 The modified assertion is added to the Policy Development window. Repeat 
 to configure the encryption of additional elements. </p></li>
</ol>

<h3>Edit the Encrypt Request Element Assertion</h3>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>In the Policy Development window, right-click 
 the &quot;Encrypt request element&quot; assertion. A drop-down menu appears. 
 Select <span style="font-weight: bold;"><B>Encrypt Request Element Properties</B></span></p></li>
</ul>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Encrypt Request Element Properties form. &nbsp;&nbsp;</p>
</div>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p style="font-weight: normal;">The Encrypt Request 
 Element Properties form appears. Change the element to encrypt as required. 
 See Steps #3-5 in <a href="#Add_and_Configure_the_Encrypt_Request_Element_Assertion">Add 
 and Configure the Encrypt Request Element Assertion</a> for instructions.</p></li>
</ul>

<h2 style="color: #000000;"><a name=Sign_Response_Element
								style="color: #000000;">Sign Response Element</a></h2>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The Sign Response Element assertion supports the W3C XML Signature 1.0 
 standard. The assertion can only be used in a Web service security policy. 
 You can add a Sign Response Element assertion for each element of the 
 response message that you want signed.</p>
</div>

<p>The Sign Response Element assertion allows you to require that the SecureSpan™ 
 Gateway sign a specific element whenever it appears in the response message 
 before sending it back to the Web service requestor. The assertion checks 
 if a selected XPath expression matches the corresponding element in the 
 response message. A match is signed by the SecureSpan™ Gateway as long 
 as a SOAP response is available and the assertion XPath is valid. In the 
 SecureSpan™ Bridge, the assertion only succeeds if the corresponding response 
 elements were signed by the Gateway. Unsigned XPath matches fail while 
 signed matches pass. A matching element is considered to be signed if 
 the signature covers at least the entire element including opening and 
 closing tags, attributes, and all child content.</p>

<h3 style="color: #000000;"><a name=Add_and_Configure_the_Sign_Response_Element_Assertion
								style="color: #000000;">Add and Configure 
 the Sign Response Element Assertion</a></h3>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Add the assertion to the Policy Development window 
 by one of two methods:</p></li>
</ol>

<ol style="list-style: disc;"
	type=disc>
	
	<ul style="list-style: disc;"
		type=disc>
		
		<li class="kadov-p"><p>Drag and drop the assertion from the [<span 
 style="font-weight: bold;"><B>Assertions</B></span>] tab into the Policy Development 
 window, or &nbsp;</p></li>
		
		<li class="kadov-p"><p>Highlight the assertion in the [<span style="font-weight: bold;"><B>Assertions</B></span>] 
 tab and click the <img src="MoveAssertionOver.gif" x-maintain-ratio="TRUE" style="border: none;
								width: 22px;
								height: 18px;
								margin-left: 0px;
								margin-right: 0px;
								margin-top: 0px;
								margin-bottom: -2.5px;
								float: none;
								border-style: none;
								border-style: none;" width="22" height="18" border="0"> &nbsp;(Add 
 Assertion) button in the Assertion Tool Bar. </p></li>
	</ul>
</ol>

<ol start=2
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The &quot;Sign response element&quot; assertion 
 is added to the Policy Development window. Right-click the assertion. 
 A drop-down menu appears. Select <span style="font-weight: bold;"><B>Sign 
 Response Element Properties</B></span>.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Sign Response Element Properties form. &nbsp;&nbsp;</p>
</div>

<ol start=3
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The Sign Response Element Properties form appears. 
 <span style="margin-left: 0px;">Select the operation that contains the 
 element that you want signed from the Web Service Operations window.</span></p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The operations are loaded from the Web service WSDL code. For information 
 about the WSDL that defines a Web service, see <a href="Manage_SOAP_Web_Services.htm">Manage 
 SOAP Web Services</a>.</p>
</div>

<ol start=4
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p style="margin-left: 0px;">The XML code for the 
 operation appears as expanded nodes in the Code window. Click the target 
 element.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 Clicking, or highlighting, an element selects it (and any child code) 
 for the assertion signature requirement. To collapse the expanded nodes, 
 click &nbsp;<img src="CollapseNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. To re-expand the nodes, click &nbsp;<img src="ExpandNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. </p>
</div>

<ol start=5>
	
	<li class="kadov-p"><p style="margin-left: 0px;">Click [<span style="font-weight: bold;"><B>OK</B></span>]. 
 The modified assertion is added to the Policy Development window. Repeat 
 to configure the signature of additional elements. </p></li>
</ol>

<h3>Edit the Sign Response Element Assertion</h3>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>In the Policy Development window, right-click 
 the &quot;Sign response element&quot; assertion. A drop-down menu appears. 
 Select <span style="font-weight: bold;"><B>Sign Response Element Properties</B></span></p></li>
</ul>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Sign Response Element Properties form. &nbsp;&nbsp;</p>
</div>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p style="font-weight: normal;">The Sign Response 
 Element Properties form appears. Change the element to sign as required. 
 See Steps #3-5 in <a href="#Add_and_Configure_the_Sign_Response_Element_Assertion">Add 
 and Configure the Sign Response Element Assertion</a> for instructions.</p></li>
</ul>

<h2 style="color: #000000;"><a name=Encrypy_Response_Element
								style="color: #000000;">Encrypt Response 
 Element</a></h2>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The Encrypt Response Element assertion supports the W3C XML Encryption 
 1.0 standard. The assertion can only be used in a Web service security 
 policy. You can add an Encrypt Response Element assertion for each element 
 of the response message that you want encrypted.</p>
</div>

<p>The Encrypt Response Element assertion allows you to require that the 
 SecureSpan™ Gateway encrypt a specific element whenever it appears in 
 the response message before sending it back to the Web service requestor. 
 The assertion checks if a selected XPath expression matches the corresponding 
 element in the response message. If any non-empty matches exist, their 
 child content will be encrypted by the SecureSpan™ Gateway as long as 
 a SOAP response is available and the XPath is valid. In the SecureSpan™ 
 Bridge, the assertion only succeeds if the corresponding response element's 
 child content was encrypted by the Gateway.</p>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 A matching element's own opening and closing tags and tag attributes do 
 not have to be encrypted. To force the encryption of an entire element 
 — including opening and closing tags, attributes, and white space content 
 — match the XPath expression to the parent element of the message. </p>
</div>

<h3 style="color: #000000;"><a name=Add_and_Configure_the_Encrypt_Response_Element_Assertion
								style="color: #000000;">Add and Configure 
 the Encrypt Response Element Assertion</a></h3>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Add the assertion to the Policy Development window 
 by one of two methods:</p></li>
</ol>

<ol style="list-style: disc;"
	type=disc>
	
	<ul style="list-style: disc;"
		type=disc>
		
		<li class="kadov-p"><p>Drag and drop the assertion from the [<span 
 style="font-weight: bold;"><B>Assertions</B></span>] tab into the Policy Development 
 window, or &nbsp;</p></li>
		
		<li class="kadov-p"><p>Highlight the assertion in the [<span style="font-weight: bold;"><B>Assertions</B></span>] 
 tab and click the <img src="MoveAssertionOver.gif" x-maintain-ratio="TRUE" style="border: none;
								width: 22px;
								height: 18px;
								margin-left: 0px;
								margin-right: 0px;
								margin-top: 0px;
								margin-bottom: -2.5px;
								float: none;
								border-style: none;
								border-style: none;" width="22" height="18" border="0"> &nbsp;(Add 
 Assertion) button in the Assertion Tool Bar. </p></li>
	</ul>
</ol>

<ol start=2
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The &quot;Encrypt response element&quot; assertion 
 is added to the Policy Development window. Right-click the assertion. 
 A drop-down menu appears. Select <span style="font-weight: bold;"><B>Encrypt 
 Response Element Properties</B></span>.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Encrypt Response Element Properties form. &nbsp;&nbsp;</p>
</div>

<ol start=3
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>The Encrypt Response Element Properties form appears. 
 <span style="margin-left: 0px;">Select the operation that contains the 
 element that you want encrypted from the Web Service Operations window.</span></p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 The operations are loaded from the Web service WSDL code. For information 
 about the WSDL that defines a Web service, see <a href="Manage_SOAP_Web_Services.htm">Manage 
 SOAP Web Services</a>. The SecureSpan™ Manager will not allow you to encrypt 
 the &quot;/soapenv:Envelope&quot; element in the Encrypt Response Element 
 Properties form. You can, however, encrypt a child element within the 
 envelope such as &quot;/soapenv:Envelope/soapenv:Body.&quot;</p>
</div>

<ol start=4
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p style="margin-left: 0px;">The XML code for the 
 operation appears as expanded nodes in the Code window. Click the target 
 element.</p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 Clicking, or highlighting, an element selects it (and any child code) 
 for the assertion encryption requirement. To collapse the expanded nodes, 
 click &nbsp;<img src="CollapseNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. To re-expand the nodes, click &nbsp;<img src="ExpandNode.gif" x-maintain-ratio="TRUE" style="border: none;
			float: none;
			width: 20px;
			height: 20px;
			border-style: none;
			border-style: none;" width="20" height="20" border="0">. </p>
</div>

<ol start=5>
	
	<li class="kadov-p"><p style="margin-left: 0px;">Click [<span style="font-weight: bold;"><B>OK</B></span>]. 
 The modified assertion is added to the Policy Development window. Repeat 
 to configure the encryption of additional elements. </p></li>
</ol>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 A WSS Signature, WS Secure Conversation, or SAML Security authentication 
 assertion must be added for each Encrypt Response Element assertion in 
 a security policy. See <a href="Configure_Edit_Authentication_Assertions.htm">Configure 
 and Edit Authentication Assertions</a> for more information.</p>
</div>

<h3>Edit the Encrypt Response Element Assertion</h3>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>In the Policy Development window, right-click 
 the &quot;Encrypt response element&quot; assertion. A drop-down menu appears. 
 Select <span style="font-weight: bold;"><B>Encrypt Response Element Properties</B></span></p></li>
</ul>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 You can also double-click the assertion in the Policy Development window 
 to open the Encrypt Response Element Properties form. &nbsp;&nbsp;</p>
</div>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p style="font-weight: normal;">The Encrypt Response 
 Element Properties form appears. Change the element to encrypt as required. 
 See Steps #3-5 in <a href="#Add_and_Configure_the_Encrypt_Response_Element_Assertion">Add 
 and Configure the Encrypt Response Element Assertion</a> for instructions.</p></li>
</ul>

<h2 style="color: #000000;"><a name=WSS_Replay_Protection
								style="color: #000000;">WSS Replay Protection</a></h2>

<p>The WSS Replay Protection assertion allows you to require that the Web 
 service request message include a valid, unique, and signed timestamp. 
 If the SecureSpan™ Gateway detects a duplicate creation timestamp in a 
 message, if an expired timestamp is present and has already passed, or 
 if the creation timestamp is more than 30 days old, then the message will 
 be rejected as a possible replay. </p>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 14px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 Since the system has to keep track of all timestamps created over the 
 past 30 days, using the WSS Replay Protection assertion in a SecureSpan™ 
 Gateway cluster can increase request message processing time and use more 
 memory. Place the WSS Replay Protection assertion after a Grant Access 
 to Users/Groups assertion to help confine the protection to successfully 
 authenticated messages, thereby reducing system processing and memory 
 requirements. For more information about the Grant Access to Users/Groups 
 assertion, see <a href="Configure_Edit_Authentication_Assertions.htm">Configure 
 and Edit Authentication Assertions</a>.</p>
</div>

<h6>&nbsp;</h6>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>Add the assertion to the Policy Development window 
 by one of two methods:</p></li>
	
	<ul style="list-style: disc;"
		type=disc>
		
		<li class="kadov-p"><p>Drag and drop the assertion from the [<span 
 style="font-weight: bold;"><B>Assertions</B></span>] tab into the Policy Development 
 window, or &nbsp;</p></li>
		
		<li class="kadov-p"><p>Highlight the assertion in the [<span style="font-weight: bold;"><B>Assertions</B></span>] 
 tab and click the <img src="MoveAssertionOver.gif" x-maintain-ratio="TRUE" style="border: none;
								width: 22px;
								height: 18px;
								margin-left: 0px;
								margin-right: 0px;
								margin-top: 0px;
								margin-bottom: -2.5px;
								float: none;
								border-style: none;
								border-style: none;" width="22" height="18" border="0"> &nbsp;(Add 
 Assertion) button in the Assertion Tool Bar. </p></li>
	</ul>
	
	<li class="kadov-p"><p>The assertion is added to the Policy Development 
 window.</p></li>
</ul>

<h6>&nbsp;</h6>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	width: 16px;
	height: 15px;
	float: none;
	border-style: none;
	border-style: none;" width="16" height="15" border="0"> &nbsp;NOTE:</B></span> 
 You cannot edit the WSS Replay Protection assertion. To remove the assertion, 
 right-click the assertion name in the Policy Development window. A drop-down 
 menu appears. Select [Delete Assertion].</p>
</div>

<h6>&nbsp;</h6>

<h4>Next Topic: </h4>

<p><a href="Configure_Edit_Message_Validation_Transformation_Assertions.htm">Configure 
 and Edit Message Validation/Transformation Assertions</a></p>

<h6>&nbsp;</h6>

</body>

</html>
