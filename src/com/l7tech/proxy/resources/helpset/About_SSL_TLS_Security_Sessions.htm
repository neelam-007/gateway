<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>





<head>

<title>About SSL/TLS Security Sessions</title>



 <meta http-equiv=content-type content="text/html; charset=windows-1252">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=5905>
<meta name=layout-width content=802>
<meta name=x-ignored-words content="SecureSpan;Workflow;Daemon;SSL;TLS;Lifecycle;SAML;FIP;Namespace;Failover;GUI;Logging.properties;URI;workflow;SOAPAction;WS-Trust;logging.properties;XP;C;Settings\;Linux;WSDL;Uptime;uptime;Unix;cert;francis;LDAP;firewall;policy.templates;admin;popup;user(s;CTRL;Login;WS;username;Username;Xml-based;DMZ;non-invasively;Solaris;internetworking;Beatty;ext;GUI-based;scalable;PKI-based;offloads;toolset;WS-Security;Services@https;servername;namespace;Gateway(s;XPath;NotOnOrAfter;saml;requestor;tempuri.org;Name.wsdl;yourcompany.com;MyWebService.wsdl.;schemas.xmlsoap.org;wsdl;URIs;GetQuoteResponse;stockSymbol;StockInfo;getQuote;getQuoteRequest;getQuoteResponse;operation(s;StockServiceSOAPBinding;StockQuote;localhost;ws;TCP;GenericLDAP;MSAD;IIPs;TivoliLDAP;assertion(s;criteria--username;headers--for;SHA;form--for;cleartext;folder(s;SSL-TLS;yuk;HTTP(S;detail(s;AES;node(s;Avg;IP;min;CDE;Kunststoff;Timeout;login;timeout;SSGAdmin;hostname;Admin;substring;DN;myLDAP;ldap;ldapserver;dc=com;myMSAD;ou=Layer;dc=LOCAL;hostname.domain;mygateway;mycompany.com;mygateway.mycompany.com.;IIS;mail.abc.com;ou=ABC;dc=ABC;mybrowse;mypassword;LdapErr;vece;findAllHeaders;myName;myPassword;myCompany;SLA;ReType;Inc;cred;certs;Xml;HttpClientCert;n.m;xxxx;System.NullReferenceException;IPAddress;MyGateway;MyGateway.MyCompany.com.;MyGateway.MyCompany.com;servername.company.com.;SLL;Wsdl;screenshots;ui;searchability;JGoodies;connection(s;Bridge.sh;daemon;Extranet;workflows;interoperable;PKCS;JMS;XSLT;WS-SecureConversation;WS-Metadata;WS-Policy;WSRP;MQ;WS-I;BSP;XServer;XBlade;XScreen;XSpeed;firewalling;ASIC;eServer;BladeCenter;ASIC-accelerated;EAI;ESB;decouples;PKI;SSO;QoS;CN=*;A(s;requestor-side;FIPs;certificate(s;CN=;IIP;CN=user;uncheck;F;HOK;NameQualifier;ssgs.xml;Files\Layer;Technologies\SecureSpan;bd;Ctrl;Y;ps;PID;axuf|grep;killall;java;JSP;non-LDAP;Netegrity;SiteMinder;keystore;CSR;machinename.domain.com.;DNS;gateway.hostname;IPs;failover;CN;proxying;WSS;DNs">




 <link rel="StyleSheet" href="JavaHelp.css">



 <META NAME="generator" CONTENT="RoboHelp by eHelp Corporation www.ehelp.com">
</head>




<body>

<h1>About SSL/TLS Security Sessions</h1>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-left: 4px;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 The following security session is only one example of a SecureSpan™ Bridge 
 and SecureSpan™ Gateway security session. Other types of transient security 
 sessions, such as those discussed in <a href="Lifecycle_of_Security_Sessions.htm">Lifecycle 
 of Security Sessions</a>, are possible depending on the security requirements 
 of a service. The policies that define the type of security session required 
 between the SecureSpan Bridge and SecureSpan Gateway are developed in 
 the SecureSpan™ Manager and saved in the target SecureSpan Gateway. See 
 the “SecureSpan™ Manager User Manual” for more information.</p>
</div>

<p>A service-specific policy is defined in the SecureSpan™ Manager and 
 saved in the SecureSpan™ Gateway that is protecting the service. In regards 
 to the SecureSpan™ Bridge, a policy outlines the security requirements 
 that dictate how a request message is decorated prior to being routed 
 to the target SecureSpan Gateway and what security features can be expected 
 in the corresponding response message from the SecureSpan Gateway. As 
 part of the security requirements for a service, the SecureSpan Bridge 
 may also have to establish a SSL/TLS security session, with or without 
 a client certificate, with the target SecureSpan Gateway. </p>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-left: 4px;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 For information about service message processing between the client application, 
 SecureSpan Bridge, and SecureSpan Gateway, see <a HREF="About_Message_Routing.htm">About 
 Message Routing</a>.</p>
</div>

<p>&nbsp;</p>

<h4>Quick Links:</h4>

<p class="quicklinks"><a href="#Use_an_SSL_Server_Certificate">Use an SSL 
 Server Certificate</a></p>

<p class="quicklinks"><a href="#Use_a_Client_Certificate">Use a Client Certificate</a></p>

<p class="quicklinks">&nbsp;</p>

<h2 style="color: #000000;"><a name=Use_an_SSL_Server_Certificate
								style="color: #000000;">Use an SSL Server 
 Certificate</a></h2>

<p>If a service’s policy in the SecureSpan™ Manager contains an SSL Transport 
 assertion from the Transport Layer Security (TLS) category of the [Assertions] 
 tab, then an SSL/TLS security session will need to be established between 
 the SecureSpan™ Bridge and SecureSpan™ Gateway.</p>

<h3>About the Server Certificate Discovery Process</h3>

<p>SSL is an industry-standardized method of encryption that relies on 
 PKI (public key infrastructure) to create a secure communication pipe 
 between the service requestor, or client application, and the SecureSpan™ 
 Gateway. As the proxy between the client application and SecureSpan Gateway, 
 the SecureSpan™ Bridge is responsible for establishing and managing this 
 communication pipe. </p>

<p>&nbsp;</p>

<p>If a client certificate exists for a Gateway Account in the SecureSpan 
 Bridge, then it will be presented whenever the SecureSpan Bridge connects 
 to the SecureSpan Gateway. In order for an SSL handshake to succeed, the 
 SecureSpan Bridge must recognize the corresponding SecureSpan Gateway 
 server certificate presented during the handshake. The CN (Common Name) 
 field of the server certificate must match the SecureSpan Gateway host 
 name configured in the Gateway Account.</p>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-left: 4px;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 Alternate SecureSpan™ Gateway IPs can be manually configured in the [Network] 
 tab in the Gateway Account Properties form, essentially allowing the SecureSpan™ 
 Bridge to bypass the DNS when a host name does not resolve to an appropriate 
 IP address. Manual IP configuration can also be used to connect to a SecureSpan 
 Gateway whose certificate does not contain a domain name. </p>
</div>

<p>&nbsp;</p>

<p>The first time that a server certificate is required, the SecureSpan 
 Bridge will send a small non-SOAP request to the SecureSpan Gateway asking 
 for its server certificate. During this server certificate discovery process, 
 a Login form will appear asking for a user name and password. The SecureSpan 
 Bridge uses the entered credentials to verify the authenticity of the 
 downloaded server certificate. The entered user name will also be sent 
 to the SecureSpan Gateway along with the request. If the SecureSpan Gateway 
 recognizes the user name and has access to a copy of the plain text password, 
 then the SecureSpan Gateway will use its copy of the password to attach 
 a checksum to the downloaded server certificate; the SecureSpan Bridge 
 then uses the previously entered password to check the checksum. This 
 authentication process yields one of two outcomes:</p>

<h4>Credentials are Not Recognized by the SecureSpan™ Gateway</h4>

<p>If the Gateway Account is configured to use credentials from a 3rd-party 
 or non-LDAP identity provider — such as Netegrity SiteMinder™ — then the 
 SecureSpan Gateway might not have access to its own plain text copy of 
 the password entered in the SecureSpan Bridge, causing an authentication 
 failure.</p>

<p>&nbsp;</p>

<p>When authentication fails, the downloaded server certificate cannot 
 be verified automatically. An authentication message may appear asking 
 for manual confirmation that the SecureSpan Gateway can be trusted. Carefully 
 check the MD5 and SHA1 certificate fingerprint numbers against the fingerprint 
 numbers provided by your Network Administrator. If the fingerprint numbers 
 differ in any way, do not manually trust the certificate. Consult your 
 Network Administrator for further instructions. &nbsp;</p>

<h4>Credentials are Verified by the SecureSpan™ Gateway</h4>

<p>If the SecureSpan™ Gateway has access to its own plain text copy of 
 the password entered in the SecureSpan™ Bridge, or can verify the certificate 
 for an LDAP Identity Provider, then the SecureSpan Bridge will trust and 
 store the server certificate automatically.</p>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-left: 4px;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 The server certificate discovery process may be triggered by multiple 
 activities that require a server certificate, including the download of 
 a policy from the SecureSpan™ Gateway, during WSDL proxying, and while 
 applying for a client certificate. If the server certificate used by the 
 SecureSpan Gateway changes, then the above process will automatically 
 repeat the next time that the SecureSpan™ Bridge attempts to connect to 
 the SecureSpan Gateway. Repeating the process does not pose a significant 
 security risk.</p>
</div>

<p>&nbsp;</p>

<p>The SecureSpan Bridge saves the certificate in the local “l7tech” directory 
 with a “certs&lt; sequential number&gt;.p12” file name. The “&lt;sequential 
 number&gt;” portion of the file name is the unique identifier of the SecureSpan 
 Gateway (see <a href="Create_Trusted_Gateway_Accounts.htm">Create Trusted 
 Gateway Accounts</a> or <a href="Create_Federated_Gateway_Accounts.htm">Create 
 Federated Gateway Accounts</a> for more information). </p>

<h3>Viewing the Saved SSL Certificate</h3>

<p>The SecureSpan™ Bridge will use the stored certificate to establish 
 and manage a security session with the SecureSpan™ Gateway during all 
 subsequent connections to the service. To view the stored certificate 
 from the SecureSpan Bridge:</p>

<p>&nbsp;</p>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Select the target Gateway Account from the Account 
 List in the SecureSpan Bridge.</p></li>
	
	<li class="kadov-p"><p>Click the [<span style="font-weight: bold;"><B>Properties</B></span>] 
 button on the Main Tool Bar or select [<span style="font-weight: bold;"><B>File</B></span>] 
 &gt; <span style="font-weight: bold;"><B>Properties</B></span> from the Main 
 Menu.</p></li>
	
	<li class="kadov-p"><p>The Gateway Account Properties form appears. Click 
 the [<span style="font-weight: bold;"><B>Identity</B></span>] tab. </p></li>
	
	<li class="kadov-p"><p>Click the [<span style="font-weight: bold;"><B>View 
 Server Certificate</B></span>] button. The window appears with the SecureSpan 
 Gateway server certificate. View certificate details. When completed, 
 click [<span style="font-weight: bold;"><B>OK</B></span>] to close the window. 
 </p></li>
</ol>

<p>&nbsp;</p>

<h2 style="color: #000000;"><a name=Use_a_Client_Certificate
								style="color: #000000;">Use a Client Certificate</a></h2>

<p>If a policy in the SecureSpan™ Manager contains any of the following 
 assertions, then a client certificate-based security session will need 
 to be established between the SecureSpan™ Bridge and SecureSpan™ Gateway:</p>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>The SSL with Client Certificate Authentication, 
 WSS Signature, or WS Secure Conversation assertion from the Access Control 
 category of the SecureSpan Manager's [Assertions] tab</p></li>
	
	<li class="kadov-p"><p>The Sign Request Element, Encrypt Response Element, 
 or WSS Replay Protection assertion from the XML Security category of the 
 SecureSpan Manager's [Assertions] tab</p></li>
</ul>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 The assertions in the XML Security category require either the WSS Signature 
 or WS Secure Conversation assertion from the Access Control category of 
 the [Assertions] tab. For information about the assertions, see the “SecureSpan™ 
 Manager User Manual” or program-based “SecureSpan™ Manager Help System.”</p>
</div>

<ul style="list-style: disc;"
	type=disc>
	
	<li class="kadov-p"><p>The SAML Assertion, with the Holder-of-Key subject 
 confirmation method, from the Access Control category of the SecureSpan 
 Manager's [Assertions] tab.</p></li>
</ul>

<p>&nbsp;</p>

<h3>About the Client Certificate Request Process</h3>

<p>A client certificate is an X.509 certificate and private key held by 
 the SecureSpan™ Bridge for a Gateway Account. A client certificate is 
 tied to a SecureSpan™ Gateway user name and, when issued by the SecureSpan 
 Gateway, uses that user name as its DN (distinguished name). A single 
 client certificate is assigned to a single set of credentials, or user 
 name and password combination, in a Gateway Account to guarantee the holder 
 of the private key and to ensure that requests originate from a particular 
 user. </p>

<p>&nbsp;</p>

<p>During the first consumption of a service whose policy requires a client 
 certificate, and if no client certificate has been manually imported, 
 the SecureSpan Bridge will generate a private and public key pair for 
 itself and use them to create a Certificate Signing Request (CSR). The 
 SecureSpan Bridge sends the CSR to the target SecureSpan Gateway to request 
 a signed client certificate. If a client certificate has not already been 
 issued for the SecureSpan Gateway user name and password (i.e. no client 
 certificate exists), then the SecureSpan Gateway will return a client 
 certificate to the SecureSpan Bridge. </p>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 The user name and password values in a Gateway Account cannot be changed 
 once a client certificate has been generated for them. To modify the user 
 name and password for a Gateway Account with a client certificate, you 
 must revoke and then re-issue the certificate or delete and then re-create 
 the Gateway Account. </p>
</div>

<p>&nbsp;</p>

<p>The Gateway Account is now tied to the client certificate and can only 
 be used to consume services from the originating SecureSpan Bridge. In 
 other words, only the SecureSpan Bridge that knows the private key for 
 the client certificate will be able to establish a security session with 
 the SecureSpan Gateway that uses the certificate. If the same set of credentials 
 are being used on two different SecureSpan Bridges to consume services 
 from the same SecureSpan Gateway, for example, but only one of the SecureSpan 
 Bridges possesses the private key for the client certificate for the credentials, 
 then only that SecureSpan Bridge will be able to connect to the SecureSpan 
 Gateway. Since only one client certificate can be generated for a SecureSpan 
 Gateway user name and password combination, only one SecureSpan Bridge 
 in a service implementation can establish a client certificate-based security 
 session with a SecureSpan Gateway for a particular set of credentials. 
 Similarly, only the first Gateway Account that applies for the client 
 certificate will receive it. Other Gateway Accounts, even on the same 
 SecureSpan Bridge, will be unable to use the same credentials to apply 
 for a client certificate. Instead, the client certificate can be manually 
 imported into the other Gateway Account that requires it. To import a 
 client certificate, see <span style="font-style: italic;"><I>Require Credentials 
 from the Client Application</I></span> in <a HREF="Create_Trusted_Gateway_Accounts.htm">Create 
 Trusted Gateway Accounts</a>.</p>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 The SecureSpan™ Gateway automatically keeps track of what user names, 
 or DNs, are tied to client certificates. An error message will appear 
 if the SecureSpan™ Bridge attempts to apply for a new client certificate 
 for the same Gateway Account. When manually importing a client certificate, 
 ensure that the certificate and private key matches the unique identifier 
 for the Gateway Account. If the Gateway Account corresponds to “gateway 
 3” in the Proxy column of the Account List, for example, then import the 
 “.l7tech/keys3.p12” PKCS#12 keystore file. The password for the keystore 
 file will be the same as the password that was used to originally apply 
 for the certificate.</p>
</div>

<p>&nbsp;</p>

<p>The SecureSpan Bridge saves the private key for the client certificate 
 in the local .l7tech directory with a “keys&lt;sequential number&gt;.p12” 
 file name. The “&lt;sequential number&gt;” portion of the file name is 
 the unique identifier of the SecureSpan Gateway. When stored on disk, 
 the private key is encrypted with the password that was used to obtain 
 the certificate. Once saved, the SecureSpan Bridge continues whichever 
 operation it was performing when it detected the need for a client certificate.</p>

<p>&nbsp;</p>

<p>The SecureSpan Bridge will automatically present the client certificate 
 to the SecureSpan Gateway to establish subsequent security sessions. The 
 client certificate will remain attached to the Gateway Account until the 
 certificate is no longer valid, until the Gateway Account is deleted, 
 or until the password for the Gateway Account is changed or the certificate 
 revoked through either the SecureSpan Bridge or the SecureSpan™ Manager. 
 For information on revoking a certificate through the SecureSpan Bridge, 
 see <span style="font-style: italic;"><I>Change the SecureSpan™ Gateway Password</I></span> 
 in <a HREF="Edit_Gateway_Accounts.htm">Manage Gateway Accounts</a>. </p>

<h3>View a Client Certificate</h3>

<p>The SecureSpan™ Bridge will use the stored certificate to establish 
 and manage a security session with the SecureSpan™ Gateway during all 
 subsequent connections to the service. The stored certificate can be viewed 
 from the SecureSpan Bridge:</p>

<p>&nbsp;</p>

<ol style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Select the target Gateway Account from the Account 
 List in the SecureSpan Bridge.</p></li>
	
	<li class="kadov-p"><p>Click the [<span style="font-weight: bold;"><B>Properties</B></span>] 
 button on the Main Tool Bar or select [<span style="font-weight: bold;"><B>File</B></span>] 
 &gt; <span style="font-weight: bold;"><B>Properties</B></span> from the Main 
 Menu.</p></li>
	
	<li class="kadov-p"><p>The Gateway Account Properties form appears. Click 
 the [<span style="font-weight: bold;"><B>Identity</B></span>] tab. </p></li>
</ol>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 44px;">
<p class="tipsnotes"><span style="font-weight: bold;"><B><img src="TIPSfinal.gif" x-maintain-ratio="TRUE" style="border: none;
	border-style: none;
	width: 16px;
	height: 14px;
	float: none;" width="16" height="14" border="0"> &nbsp;TIP:</B></span> 
 The client certificate can also be viewed in the [Certificates] tab in 
 the SecureSpan™ Manager’s User Properties form.</p>
</div>

<ol start=4
	style="list-style: decimal;"
	type=1>
	
	<li class="kadov-p"><p>Click the [<span style="font-weight: bold;"><B>View 
 Client Certificate</B></span>] button. The window appears with the certificate. 
 View certificate details. When completed, click [<span style="font-weight: bold;"><B>OK</B></span>] 
 to close the window.</p></li>
</ol>

<p>&nbsp;</p>

<div style="padding: 5px;
			background-color: #f8fbdd;
			margin-right: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			float: none;
			width: 550px;
			margin-left: 4px;">
<p class="tipsnotes"><b style="font-weight: bold;"><span style="font-weight: bold;"><B><img src="NOTEfinal.gif" x-maintain-ratio="TRUE" style="border: none;
			width: 16px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;" width="16" height="15" border="0"> &nbsp;</B></span>NOTE:</b> 
 To revoke the client certificate, change the SecureSpan™ Gateway password 
 as outlined in <a HREF="Edit_Gateway_Accounts.htm">Manage Gateway Accounts</a>.</p>
</div>

<p>&nbsp;</p>

<h4>Next Topic:</h4>

<p><a href="Configure_Client_Applications.htm"><a HREF="Lifecycle_of_Security_Sessions.htm">Lifecycle 
 of Security Sessions</a></p>

<p>&nbsp;</p>

</body>

</html>
