<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-1.1.dtd">

<!-- $Id$ -->

<!--
  This is the PostgreSQL version of the Hibernate mapping file.

  NOTE: All changes to this file must also be made in ../mysql/SSG.hbm.xml!
-->

<hibernate-mapping>
    <!-- "oid" is a built-in column in PostgreSQL, so all column="oid" have been changed to column="objectid" -->

    <class name="com.l7tech.identity.IdentityProviderConfig" table="identity_provider">
        <id name="oid" column="objectid" type="long" unsaved-value="-1">
            <generator class="hilo.long"/>
        </id>
        <version name="version" column="version" type="integer"/>

        <property name="description" type="string"/>
        <property name="name" type="string"/>

        <property name="typeVal" type="int" column="type" />

        <property name="serializedProps" type="string" column="properties" />
    </class>

    <class name="com.l7tech.identity.internal.InternalGroup" table="internal_group">
        <id name="oid" column="objectid" type="long" unsaved-value="-1">
            <generator class="hilo.long"/>
        </id>

        <version name="version" column="version" type="integer"/>

        <property name="description" type="string"/>
        <property name="name" type="string"/>

        <!--
        <set role="members" lazy="false" table="internal_user_group">
            <key column="internal_group"/>
            <many-to-many class="com.l7tech.identity.User" column="internal_user"/>
        </set>
        -->
    </class>

    <class name="com.l7tech.identity.internal.InternalUser" table="internal_user">
        <id name="oid" column="objectid" type="long" unsaved-value="-1">
            <generator class="hilo.long"/>
        </id>

        <version name="version" column="version" type="integer"/>

        <property name="name" type="string" column="name" />
        <property name="login" type="string" column="login" />
        <property name="password" type="string"/>
        <property name="firstName" column="first_name"  type="string"/>
        <property name="lastName" column="last_name" type="string"/>
        <property name="email" type="string"/>
        <property name="title" type="string"/>

        <!--
        <set role="groups" lazy="false" table="internal_user_group">
            <key column="internal_user"/>
            <many-to-many class="com.l7tech.identity.Group" column="internal_group"/>
        </set>
        -->
    </class>

    <class name="com.l7tech.identity.internal.GroupMembership" table="internal_user_group">
        <composite-id>
            <key-property name="userOid"/>
            <key-property name="groupOid"/>
        </composite-id>

        <property name="userOid" type="long" column="internal_user"/>
        <property name="groupOid" type="long" column="internal_group"/>
    </class>


    <class name="com.l7tech.service.PublishedService" table="published_service">
        <id name="oid" column="objectid" type="long" unsaved-value="-1">
            <generator class="hilo.long"/>
        </id>

        <version name="version" column="version" type="integer"/>

        <property name="name" column="name" type="string"/>
        <property name="policyXml" column="policy_xml" type="string"/>
        <property name="wsdlUrl" column="wsdl_url" type="string"/>
        <property name="wsdlXml" column="wsdl_xml" type="string"/>
        <property name="disabled" column="disabled" type="boolean"/>
    </class>

    <class name="com.l7tech.identity.cert.CertEntryRow" table="client_cert">
        <id name="oid" column="objectid" type="long" unsaved-value="-1">
            <generator class="hilo.long"/>
        </id>
        <property name="provider" column="provider" type="long"/>
        <property name="login" column="login" type="string"/>
        <property name="cert" column="cert" type="string"/>
        <property name="resetCounter" column="reset_counter" type="int"/>
    </class>

</hibernate-mapping>
