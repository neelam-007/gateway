<?xml version="1.0" encoding="UTF-8"?>
<deployment xmlns="http://xml.apache.org/axis/wsdd/" xmlns:java="http://xml.apache.org/axis/wsdd/providers/java">
 <globalConfiguration>
  <!-- <parameter name="adminPassword" value="admin"/>
  <parameter name="attachments.Directory" value="attachments"/>
  <parameter name="attachments.implementation" value="org.apache.axis.attachments.AttachmentsImpl"/> -->
  <parameter name="sendXsiTypes" value="true"/>
  <parameter name="sendMultiRefs" value="true"/>
  <parameter name="sendXMLDeclaration" value="true"/>
  <parameter name="axis.sendMinimizedElements" value="true"/>
  <requestFlow>
   <handler type="java:org.apache.axis.handlers.JWSHandler">
    <parameter name="scope" value="session"/>
   </handler>
   <handler type="java:org.apache.axis.handlers.JWSHandler">
    <parameter name="scope" value="request"/>
    <parameter name="extension" value=".jwr"/>
   </handler>
  </requestFlow>
 </globalConfiguration>
 <handler name="LocalResponder" type="java:org.apache.axis.transport.local.LocalResponder"/>
 <handler name="URLMapper" type="java:org.apache.axis.handlers.http.URLMapper"/>
 <handler name="Authenticate" type="java:org.apache.axis.handlers.SimpleAuthenticationHandler"/>
    
 <!-- <service name="AdminService" provider="java:MSG">
  <parameter name="allowedMethods" value="AdminService"/>
  <parameter name="enableRemoteAdmin" value="false"/>
  <parameter name="className" value="org.apache.axis.utils.Admin"/>
  <namespace>http://xml.apache.org/axis/wsdd/</namespace>
 </service> -->

 <service name="Version" provider="java:RPC">
  <parameter name="allowedMethods" value="getVersion"/>
  <parameter name="className" value="org.apache.axis.Version"/>
 </service>

 <service name="identityAdmin" provider="java:RPC">

  <operation name="echoVersion" qname="ns1:echoVersion" returnQName="echoVersionReturn" returnType="xsd:string" xmlns:ns1="http://www.layer7-tech.com/identity" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  <operation name="findAllIdentityProviderConfig" qname="ns2:findAllIdentityProviderConfig" returnQName="findAllIdentityProviderConfigReturn" returnType="ns2:ArrayOfHeaders" xmlns:ns2="http://www.layer7-tech.com/identity"/>
  <operation name="findAllIdentityProviderConfigByOffset" qname="ns3:findAllIdentityProviderConfigByOffset" returnQName="findAllIdentityProviderConfigByOffsetReturn" returnType="ns3:ArrayOfHeaders" xmlns:ns3="http://www.layer7-tech.com/identity">
   <parameter name="offset" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="windowSize" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <!-- <operation name="findIdentityProviderConfigByPrimaryKey" qname="ns4:findIdentityProviderConfigByPrimaryKey" returnQName="findIdentityProviderConfigByPrimaryKeyReturn" returnType="ns4:IdentityProviderConfig" xmlns:ns4="http://www.layer7-tech.com/identity"> -->
  <operation name="findIdentityProviderConfigByPrimaryKey" qname="ns4:findIdentityProviderConfigByPrimaryKey" returnQName="findIdentityProviderConfigByPrimaryKeyReturn" xmlns:ns4="http://www.layer7-tech.com/identity">
   <parameter name="oid" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="saveIdentityProviderConfig" qname="ns5:saveIdentityProviderConfig" returnQName="saveIdentityProviderConfigReturn" returnType="xsd:long" xmlns:ns5="http://www.layer7-tech.com/identity" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <parameter name="identityProviderConfig" type="ns5:IdentityProviderConfig"/>
  </operation>
  <operation name="deleteIdentityProviderConfig" qname="ns6:deleteIdentityProviderConfig" xmlns:ns6="http://www.layer7-tech.com/identity">
   <parameter name="oid" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
  <operation name="findAllUsers" qname="ns7:findAllUsers" returnQName="findAllUsersReturn" returnType="ns7:ArrayOfHeaders" xmlns:ns7="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
  <operation name="findAllUsersByOffset" qname="ns8:findAllUsersByOffset" returnQName="findAllUsersByOffsetReturn" returnType="ns8:ArrayOfHeaders" xmlns:ns8="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="offset" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="windowSize" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="searchIdentities" qname="ns8:searchIdentities" returnQName="searchIdentitiesReturn" returnType="ns8:ArrayOfHeaders" xmlns:ns8="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="types" type="ns11:ArrayOfEntityType"/>
   <parameter name="pattern" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <!-- <operation name="findUserByPrimaryKey" qname="ns9:findUserByPrimaryKey" returnQName="findUserByPrimaryKeyReturn" returnType="ns9:User" xmlns:ns9="http://www.layer7-tech.com/identity"> -->
  <operation name="findUserByPrimaryKey" qname="ns9:findUserByPrimaryKey" returnQName="findUserByPrimaryKeyReturn" xmlns:ns9="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="oid" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
     
  <operation name="deleteUser" qname="ns10:deleteUser" xmlns:ns10="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="userId" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
  <operation name="saveUser" qname="ns11:saveUser" returnQName="saveUserReturn" returnType="xsd:long" xmlns:ns11="http://www.layer7-tech.com/identity" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <parameter name="identityProviderConfigId" type="xsd:long"/>
   <parameter name="user" type="ns11:User"/>
  </operation>
  <operation name="findAllGroups" qname="ns12:findAllGroups" returnQName="findAllGroupsReturn" returnType="ns12:ArrayOfHeaders" xmlns:ns12="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
  <operation name="findAllGroupsByOffset" qname="ns13:findAllGroupsByOffset" returnQName="findAllGroupsByOffsetReturn" returnType="ns13:ArrayOfHeaders" xmlns:ns13="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="offset" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="windowSize" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>
  <operation name="findGroupByPrimaryKey" qname="ns14:findGroupByPrimaryKey" returnQName="findGroupByPrimaryKeyReturn" xmlns:ns14="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="groupId" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="deleteGroup" qname="ns15:deleteGroup" xmlns:ns15="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="groupId" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="saveGroup" qname="ns16:saveGroup" returnQName="saveGroupReturn" returnType="xsd:long" xmlns:ns16="http://www.layer7-tech.com/identity" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <parameter name="identityProviderConfigId" type="xsd:long"/>
   <parameter name="group" type="ns16:Group"/>
  </operation>

  <operation name="getUserCert" qname="ns10:getUserCert" returnQName="getUserCertReturn" xmlns:ns10="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="userId" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="revokeCert" qname="ns10:revokeCert" xmlns:ns10="http://www.layer7-tech.com/identity">
   <parameter name="identityProviderConfigId" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="userId" type="xsd:string" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <parameter name="allowedMethods" value="echoVersion findAllIdentityProviderConfig findAllIdentityProviderConfigByOffset findIdentityProviderConfigByPrimaryKey saveIdentityProviderConfig deleteIdentityProviderConfig findAllUsers findAllUsersByOffset findUserByPrimaryKey deleteUser saveUser findAllGroups findAllGroupsByOffset findGroupByPrimaryKey deleteGroup saveGroup searchIdentities getUserCert revokeCert"/>
  <parameter name="wsdlPortType" value="identityPortType"/>
  <parameter name="scope" value="Application"/>
  <parameter name="className" value="com.l7tech.server.identity.IdentityAdminImpl"/>
  <parameter name="wsdlServicePort" value="identityPort"/>
  <parameter name="wsdlTargetNamespace" value="http://www.layer7-tech.com/identity"/>
  <parameter name="wsdlServiceElement" value="identityService"/>

  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns17:Group" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.identity.Group" xmlns:ns17="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns18:User" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.identity.User" xmlns:ns18="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns19:IdentityProviderConfig" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.identity.IdentityProviderConfig" xmlns:ns19="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns21:EntityHeader" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.objectmodel.EntityHeader" xmlns:ns21="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns22:EntityType" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.objectmodel.EntityType" xmlns:ns22="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.ArrayDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns23:ArrayOfHeaders" serializer="org.apache.axis.encoding.ser.ArraySerializerFactory" type="java:com.l7tech.objectmodel.EntityHeader[]" xmlns:ns23="http://www.layer7-tech.com/identity"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.ArrayDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns23:ArrayOfEntityType" serializer="org.apache.axis.encoding.ser.ArraySerializerFactory" type="java:com.l7tech.objectmodel.EntityType[]" xmlns:ns23="http://www.layer7-tech.com/identity"/>

 </service>



 <service name="serviceAdmin" provider="java:RPC">
  <parameter name="allowedMethods" value="resolveWsdlTarget findServiceByPrimaryKey findAllPublishedServices findAllPublishedServicesByOffset savePublishedService deletePublishedService"/>
  <parameter name="wsdlPortType" value="servicePortType"/>
  <parameter name="scope" value="Application"/>
  <parameter name="className" value="com.l7tech.server.service.ServiceAdminImpl"/>
  <parameter name="wsdlServicePort" value="servicePort"/>
  <parameter name="wsdlTargetNamespace" value="http://www.layer7-tech.com/service"/>
  <parameter name="wsdlServiceElement" value="svcService"/>

  <operation name="resolveWsdlTarget" qname="ns1:resolveWsdlTarget" returnQName="resolveWsdlTargetReturn" returnType="xsd:string" xmlns:ns1="http://www.layer7-tech.com/service" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <parameter name="url" type="xsd:string"/>
  </operation>

  <operation name="findServiceByPrimaryKey" qname="ns4:findServiceByPrimaryKey" returnQName="findServiceByPrimaryKeyReturn" returnType="ns4:PublishedService" xmlns:ns4="http://www.layer7-tech.com/service">
    <parameter name="oid" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="findAllPublishedServices" qname="ns2:findAllPublishedServices" returnQName="findAllPublishedServicesReturn" returnType="ns2:ArrayOfHeaders" xmlns:ns2="http://www.layer7-tech.com/service"/>

  <operation name="findAllPublishedServicesByOffset" qname="ns3:findAllPublishedServicesByOffset" returnQName="findAllPublishedServicesByOffsetReturn" returnType="ns3:ArrayOfHeaders" xmlns:ns3="http://www.layer7-tech.com/service">
   <parameter name="offset" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
   <parameter name="windowSize" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <operation name="savePublishedService" qname="ns5:savePublishedService" returnQName="savePublishedServiceReturn" returnType="xsd:long" xmlns:ns5="http://www.layer7-tech.com/service" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <parameter name="service" type="ns5:PublishedService"/>
  </operation>

  <operation name="deletePublishedService" qname="ns6:deletePublishedService" xmlns:ns6="http://www.layer7-tech.com/identity">
   <parameter name="oid" type="xsd:long" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns17:PublishedService" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.service.PublishedService" xmlns:ns17="http://www.layer7-tech.com/service"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns22:EntityType" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.objectmodel.EntityType" xmlns:ns22="http://www.layer7-tech.com/service"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.BeanDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns21:EntityHeader" serializer="org.apache.axis.encoding.ser.BeanSerializerFactory" type="java:com.l7tech.objectmodel.EntityHeader" xmlns:ns21="http://www.layer7-tech.com/service"/>
  <typeMapping deserializer="org.apache.axis.encoding.ser.ArrayDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns23:ArrayOfHeaders" serializer="org.apache.axis.encoding.ser.ArraySerializerFactory" type="java:com.l7tech.objectmodel.EntityHeader[]" xmlns:ns23="http://www.layer7-tech.com/service"/>

 </service>

 <service name="loggingAdmin" provider="java:RPC">
  <parameter name="allowedMethods" value="getSystemLog"/>
  <parameter name="wsdlPortType" value="loggingPortType"/>
  <parameter name="scope" value="Application"/>
  <parameter name="className" value="com.l7tech.adminws.logging.Service"/>
  <parameter name="wsdlServicePort" value="loggingPort"/>
  <parameter name="wsdlTargetNamespace" value="http://www.layer7-tech.com/logging"/>
  <parameter name="wsdlServiceElement" value="loggingService"/>

  <operation name="getSystemLog" qname="ns1:getSystemLog" returnQName="getSystemLogReturn" returnType="ns1:ArrayOfStrings" xmlns:ns1="http://www.layer7-tech.com/logging" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <parameter name="offset" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
      <parameter name="size" type="xsd:int" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </operation>

  <typeMapping deserializer="org.apache.axis.encoding.ser.ArrayDeserializerFactory" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" qname="ns1:ArrayOfStrings" serializer="org.apache.axis.encoding.ser.ArraySerializerFactory" type="java:java.lang.String[]" xmlns:ns1="http://www.layer7-tech.com/logging"/>

 </service>


 <transport name="http">
  <requestFlow>
   <handler type="URLMapper"/>
   <!-- comment the following two handlers to bypass admin ws authentication mechanism -->
   <handler type="java:com.l7tech.remote.ws.security.AuthenticationAxisHandler"/>
  </requestFlow>
 </transport>
 <transport name="local">
  <responseFlow>
   <handler type="LocalResponder"/>
  </responseFlow>
 </transport>
</deployment>